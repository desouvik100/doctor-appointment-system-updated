# ============================================
# HEALTHSYNC PRO - BACKEND ENVIRONMENT VARIABLES
# ============================================
# Copy this file to .env and fill in your values

# ============================================
# DATABASE CONFIGURATION
# ============================================
# MongoDB Atlas Connection String
# Get from: https://cloud.mongodb.com
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/doctor_appointment?retryWrites=true&w=majority

# ============================================
# SERVER CONFIGURATION
# ============================================
PORT=5005
NODE_ENV=development

# ============================================
# JWT AUTHENTICATION
# ============================================
# Generate a secure random string for production
JWT_SECRET=your_secure_jwt_secret_here_min_32_chars

# ============================================
# CORS CONFIGURATION
# ============================================
# For development
CORS_ORIGIN=http://localhost:3000
FRONTEND_URL=http://localhost:3000

# For production (update with your Vercel URL)
# CORS_ORIGIN=https://your-app.vercel.app
# FRONTEND_URL=https://your-app.vercel.app

# ============================================
# EMAIL CONFIGURATION (Gmail)
# ============================================
# Use Gmail App Password (not regular password)
# Enable 2FA and create App Password at: https://myaccount.google.com/apppasswords
EMAIL_USER=your_email@gmail.com
EMAIL_PASS=your_gmail_app_password

# Admin Email - receives security alerts and notifications
ADMIN_EMAIL=admin@healthsyncpro.in

# Optional: Resend API for better deliverability
RESEND_API_KEY=re_your_resend_api_key
RESEND_FROM_EMAIL=HealthSync <no-reply@yourdomain.com>

# ============================================
# AI CHATBOT CONFIGURATION
# ============================================
# Google Gemini API (Recommended)
# Get from: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key
AI_PROVIDER=gemini

# OpenAI (Alternative)
OPENAI_API_KEY=your_openai_api_key_here

# ============================================
# GOOGLE MEET / CALENDAR INTEGRATION
# ============================================
# Get from: https://console.cloud.google.com/apis/credentials
# 1. Create OAuth 2.0 Client ID (Web application)
# 2. Add redirect URI: http://localhost:5005/api/google/callback
# 3. For production: https://your-backend.onrender.com/api/google/callback

GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-your_google_client_secret
GOOGLE_REDIRECT_URI=http://localhost:5005/api/google/callback

# Get refresh token by visiting: http://localhost:5005/api/google/auth-url
GOOGLE_REFRESH_TOKEN=your_google_refresh_token

# ============================================
# RAZORPAY PAYMENT CONFIGURATION (Recommended)
# ============================================
# Get from: https://dashboard.razorpay.com/app/keys
# Razorpay is enabled automatically when keys are set
#
# FOR TEST MODE (development):
# RAZORPAY_KEY_ID=rzp_test_your_key_id
# RAZORPAY_KEY_SECRET=your_test_secret
# RAZORPAY_MODE=test
#
# FOR LIVE MODE (production - REAL MONEY):
# RAZORPAY_KEY_ID=rzp_live_your_key_id
# RAZORPAY_KEY_SECRET=your_live_secret
# RAZORPAY_MODE=live
#
# NOTE: Mode is auto-detected from key prefix (rzp_test_ or rzp_live_)
# but you can explicitly set RAZORPAY_MODE to override
#
RAZORPAY_KEY_ID=rzp_test_your_key_id
RAZORPAY_KEY_SECRET=your_key_secret
RAZORPAY_MODE=test

# ============================================
# PAYU PAYMENT CONFIGURATION (Legacy/Alternative)
# ============================================
# Get from: https://onboarding.payu.in/app/account
# Set USE_PAYU_PAYMENTS=true to enable PayU instead of Razorpay
USE_PAYU_PAYMENTS=false
PAYU_MERCHANT_KEY=your_payu_merchant_key
PAYU_MERCHANT_SALT=your_payu_merchant_salt
PAYU_MODE=test

# Backend URL for payment callbacks
BACKEND_URL=http://localhost:5005

# Payment Settings
CURRENCY=INR
PLATFORM_FEE_PERCENTAGE=7
GST_PERCENTAGE=18

# ============================================
# TIMEZONE CONFIGURATION
# ============================================
TIMEZONE=Asia/Kolkata

# ============================================
# SMS CONFIGURATION (Choose one provider)
# ============================================
# Provider: 'twilio' or 'msg91'
SMS_PROVIDER=msg91

# MSG91 (Popular in India)
# Get from: https://msg91.com/
MSG91_AUTH_KEY=your_msg91_auth_key
MSG91_SENDER_ID=HLTHSN
MSG91_TEMPLATE_ID=your_template_id

# Twilio (International)
# Get from: https://console.twilio.com/
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_WHATSAPP_NUMBER=+14155238886

# ============================================
# WHATSAPP BUSINESS API
# ============================================
# Get from: https://developers.facebook.com/apps/
# 1. Create a Meta Business App
# 2. Add WhatsApp product
# 3. Get Phone Number ID and Access Token from WhatsApp > API Setup
WHATSAPP_PHONE_NUMBER_ID=your_phone_number_id
WHATSAPP_ACCESS_TOKEN=your_permanent_access_token
WHATSAPP_BUSINESS_ACCOUNT_ID=your_business_account_id
WHATSAPP_VERIFY_TOKEN=healthsync_whatsapp_verify

# ============================================
# FIREBASE PUSH NOTIFICATIONS
# ============================================
# Get from: https://console.firebase.google.com/
# Project Settings > Service Accounts > Generate new private key
FIREBASE_PROJECT_ID=your_firebase_project_id
FIREBASE_CLIENT_EMAIL=firebase-adminsdk@your-project.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYour_Private_Key_Here\n-----END PRIVATE KEY-----\n"

# ============================================
# REDIS CACHE (Optional - for high performance)
# ============================================
# Get free Redis from: https://upstash.com/ (recommended) or https://redis.com/
# Upstash offers 10,000 commands/day free - perfect for small apps
# If not set, app uses in-memory cache (works fine for single instance)
#
# Setup on Upstash:
# 1. Create account at https://upstash.com/
# 2. Create a new Redis database (choose closest region)
# 3. Copy the Redis URL from the dashboard
# 4. Add to Render environment variables
#
REDIS_URL=redis://default:password@your-redis-host:6379

# ============================================
# CLOUDINARY (Medical File Storage)
# ============================================
# Get from: https://cloudinary.com/console
# Sign up for free tier (25GB storage, 25GB bandwidth/month)
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret

# ============================================
# SECURITY CONFIGURATION
# ============================================
# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
LOGIN_RATE_LIMIT_MAX=5
LOGIN_RATE_LIMIT_WINDOW_MS=900000

# Session Security
SESSION_SECRET=your_secure_session_secret_min_32_chars
SESSION_TIMEOUT_MINUTES=30
MAX_SESSIONS_PER_USER=5

# IP Blocking
AUTO_BLOCK_FAILED_LOGINS=5
IP_BLOCK_DURATION_MINUTES=30

# Audit Logging
AUDIT_LOG_RETENTION_DAYS=365
ENABLE_AUDIT_LOGGING=true

# File Upload Security
MAX_FILE_SIZE_MB=10
ALLOWED_FILE_TYPES=image/jpeg,image/png,application/pdf

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE_CRON=0 2 * * *

# Security Alerts
SECURITY_ALERT_EMAIL=security@healthsyncpro.in
ENABLE_AI_THREAT_DETECTION=true

# ============================================
# TEST MODE (Development Only)
# ============================================
TEST_APPOINTMENT=false